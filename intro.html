<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Zuspec Language Overview &#8212; Zuspec Language  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Types" href="datatypes.html" />
    <link rel="prev" title="Zuspec Language" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="zuspec-language-overview">
<h1>Zuspec Language Overview<a class="headerlink" href="#zuspec-language-overview" title="Link to this heading">¶</a></h1>
<p>Zuspec is a language focused on modeling digital hardware
designs at multiple levels of abstraction – from an
abstract behavioral model down to register transfer level (RTL).
Multiple distinct implementations can be derived from a Zuspec
model to address various points on the performance / fidelity curve.</p>
<p>Zuspec is a Python-based language, which means that it is embedded in
Python and adopts Python syntax, but applies special semantic rules
to specified portions of the description.</p>
<p>Let’s look at an example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Counter example</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">zuspec.dataclasses</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">zdc</span>

<span class="nd">@zdc</span><span class="o">.</span><span class="n">dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Counter</span><span class="p">(</span><span class="n">zdc</span><span class="o">.</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">clock</span> <span class="p">:</span> <span class="n">zdc</span><span class="o">.</span><span class="n">Bit</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">input</span><span class="p">()</span>
    <span class="n">reset</span> <span class="p">:</span> <span class="n">zdc</span><span class="o">.</span><span class="n">Bit</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">input</span><span class="p">()</span>
    <span class="n">count</span> <span class="p">:</span> <span class="n">zdc</span><span class="o">.</span><span class="n">Bit</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">output</span><span class="p">()</span>

    <span class="nd">@zdc</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">clock</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span><span class="n">s</span><span class="o">.</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span><span class="n">s</span><span class="o">.</span><span class="n">reset</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_inc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Note that we follow the Python <cite>dataclasses</cite> pattern</p>
<ul class="simple">
<li><p><strong>Component</strong> - Components are structural elements, equivalent to</p></li>
</ul>
<p>Verilog modules and SystemC or PSS components.
* <strong>Signal Ports</strong> -
* <strong>Sync</strong> - Marks a method as being activated on a clock or
reset edge. The semantics of code in the method are behavioral.
However, output variables only change at clock edge (ie Verilog
non-blocking assignment).</p>
<section id="interaction-with-tools">
<h2>Interaction with Tools<a class="headerlink" href="#interaction-with-tools" title="Link to this heading">¶</a></h2>
<p>Zuspec defines a language, which means that tools must have a way to
operate on a Zuspec description. The <cite>zuspec.dataclasses.api</cite>
package provides a visitor that iterates over key features of a Zuspec
model.</p>
<p># Abstracted Messaging (base on which TLM was built)
- field of &lt;Api&gt; = port()
- field of &lt;Api&gt; = export(bind here)
- build/connect process ensures logical result</p>
<p>=&gt; Really clumsy to do in C++ ; impossible in SV
=&gt; Really easy to describe in Python. Several (more-complex)</p>
<blockquote>
<div><p>ways to implement.</p>
</div></blockquote>
<p>Goal: capture specification not implementation</p>
<dl>
<dt>=&gt; Leverage association rules</dt><dd><ul class="simple">
<li><p>associate with nearest timebase provider</p></li>
<li><p>association control</p></li>
</ul>
<p>=&gt; Use association properties for static APIs?
Api::C -&gt; nearest association – which might be top</p>
</dd>
</dl>
<p>=&gt; Assess</p>
<p>Pool is an association:
pool&lt;T&gt; forms an association with any input&lt;T&gt;, output&lt;T&gt;
- Filter rule: associate anything?
-&gt; Each provider
-&gt; Pushing down match rules
–&gt; component must gather providers
-&gt; Error if multiple rules match
-&gt; associate() -&gt; Returns a map to add to the stack
–&gt; Upper must win…</p>
<p>-&gt; Two stacks: natural ; override
–&gt; Check override stack first
–&gt; Check natural stack second</p>
<p>=&gt; Do need something for binding
-&gt; That’s impl specific…
-&gt; Transform -&gt; map ‘std’ to &lt;provider&gt;
=&gt; Top-level component has required associatians</p>
<blockquote>
<div><p>-&gt; Use for an external API (vs being built-in)</p>
</div></blockquote>
<dl>
<dt>=&gt; Must identify base types assumed to be tool-supported</dt><dd><p>-&gt; Ex: tool that doesn’t support registers must be flagged
-&gt; Contract of ‘tool recognizes these core constructs’
–&gt; This is extensible. Libraries can flag their base classes</p>
<blockquote>
<div><p>as needing to be recognized</p>
</div></blockquote>
</dd>
</dl>
<p>Pure: having no data -&gt; Really talking about abstract class?</p>
<p>Core language support (parser) must provide elab and linking
facilities.
- Build associations maps</p>
<p>Alias methods to services?
print() &lt;-&gt; std.print()
- Certain implementations can require a method to be</p>
<blockquote>
<div><p>a struct member</p>
</div></blockquote>
<p># Creating a component instance triggers a scan for required services
- If a component has associated actions, then
-&gt; Forall actions that match this type, check for
–&gt; memory and resource claims
–&gt; Buffer/State/</p>
<p>Violation of scheduling rules can be detected at runtime:
-&gt; Parallel must check for duplicate targets
-&gt; Actions must expose associations
-&gt; State is a single resource with completion semantics</p>
<p>Service Provider
Resource Provider &lt;-&gt; Pool is also a resource provider</p>
<p>forall:</p>
<dl class="simple">
<dt>with forall(select) as fp:</dt><dd><p>constraints</p>
</dd>
</dl>
<p># Locating the claim
- up- or -down associative
- optional (0,1), single, or multi
- Use a dedicated</p>
<p>Associations can be up- or down-associative.
- comp is a down-associative
- aspace (claim), pool (lock/share, input/output) is</p>
<p># Organizing assiciations
- Provider / Client
- Is different from port binding
-&gt; Provider instances add to this component’s scope
-&gt; Push an override
–&gt; Provider stack searched in reverse
–&gt; Override stack searched in order
–&gt; Bind acts as an override(!)</p>
<p>action input/output ports are consumers</p>
<p>Associate Providers</p>
<p># Associating features with methods</p>
<p># Structs</p>
<p># Components
- init
- associate_down (maybe: available in build?)
- build
- associate_up
- bind / connect</p>
<p>=&gt; Can avoid repeated constructions</p>
<p>Type model
- Type variants expanded
- Cut-off evaluation ASAP</p>
<dl class="simple">
<dt>-&gt; Component is left with</dt><dd><ul class="simple">
<li><p>bindmap of associations
- claim -&gt; src</p></li>
<li><p>bindmap of connections</p></li>
<li></li>
</ul>
</dd>
</dl>
<p># Actions
- How
- Associate themselves with 0+ components
&lt;path&gt;.execute(ActionT)
-&gt;
-&gt; When a type is not valid on a subtree, it is not valid for all members</p>
<p># Services
- Individual connection
- Specific provider is secondary to the existence of a provider
-&gt; Config is a service
–&gt; Can distribute as needed
-&gt; Config can also be passed down as a const</p>
<p>-&gt; Service-provider component
–&gt; Provide access for programmatic build?
–&gt; Need a point where
–&gt; Have to be ‘bottom-up’ build</p>
<ul class="simple">
<li><p>bind is either p2p or a match pattern</p></li>
<li></li>
</ul>
<p># Covergroups</p>
<p># What about local providers / consumers?
- assumes
- functions support providers as well?</p>
<blockquote>
<div><ul class="simple">
<li><p>Claims establish local deps</p></li>
<li><p>Can roll-up</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>How to identify? By type handle</p></li>
<li><p>action</p></li>
</ul>
<p># External API to provider functionality
-</p>
<p># Generative Features
- Create exec blocks with parameterized co-routines
- Create sub-components / sub-fields</p>
<p># Profiles
- Language must define sets of supported features</p>
<blockquote>
<div><ul class="simple">
<li><p>Synthesizable RTL</p></li>
<li><p>Behavioral RTL</p></li>
<li><p>Behavioral HVL</p></li>
<li><p>Portable TLM</p></li>
<li><p>Portable PV</p></li>
<li><p>Portable Test</p></li>
<li><p>Python</p></li>
<li><p>Static/Formal</p></li>
</ul>
<p>Run checks in terms of profiles</p>
<ul class="simple">
<li><p>A profile is a concept.</p></li>
<li><p>Always described in human-readable text</p></li>
<li><p>Identified by a class</p></li>
<li><p>Class provides a validator
- Validate decorated class with respect to its profile (always specific to most-restrictive type)
-</p></li>
<li><p>Profiles are composed by</p></li>
</ul>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Zuspec Language</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Zuspec Language Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interaction-with-tools">Interaction with Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datatypes.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="fields.html">Class Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="struct.html">Struct Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="constraints.html">Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiles.html">Profiles</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Zuspec Language</a></li>
      <li>Next: <a href="datatypes.html" title="next chapter">Data Types</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Matthew Ballance.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/intro.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>