<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Zuspec Language Overview &#8212; Zuspec Language  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Abstraction Levels" href="abstraction_levels.html" />
    <link rel="prev" title="Zuspec Language" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="zuspec-language-overview">
<h1>Zuspec Language Overview<a class="headerlink" href="#zuspec-language-overview" title="Link to this heading">¶</a></h1>
<p>Zuspec is a Python-embedded modeling language focused on modeling
the behavior of digital hardware designs at multiple levels of abstraction
– from an abstract behavioral model down to register transfer level (RTL).
Multiple distinct implementations can be derived from a Zuspec
model to address various points on the performance / fidelity curve.</p>
<p>Zuspec is a Python-based language, which means that it is embedded in
Python and adopts Python syntax, but applies special semantic rules
to specified portions of the description.</p>
<p>Zuspec is composed of four elements:</p>
<ul class="simple">
<li><p>Language facade – the base classes and decorators used to identify key elements of the description</p></li>
<li><p>Pure-Python runtime – A pure Python implementation of the Zuspec semantics that leverages the Python
implementation of the source description</p></li>
<li><p>Data Model – An AST-like data model that captures the key type and behavioral descriptions involved
in a model</p></li>
<li><p>Datamodel Processing Tools – Tools that operate on the data model to analyze aspects
of the model or produce additional outputs (eg C implementation)</p></li>
</ul>
<p>It is critical to keep all of these aspects independent and modular. For example, the language
facade (zuspec.dataclasses namespace classes) must not be aware of the pure-python runtime.</p>
<p>Zuspec types inherit from a Zuspec base class, and are decorated with &#64;zdc.dataclass.
Zuspec classes are dataclasses.</p>
<p>Fields of Zuspec classes have the basic form of Python dataclass fields.</p>
<p>Zuspec input is valid Python syntax, but is not executable on its own because the input
specifies intent, not implementation. For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyIF</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
  <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">api</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyTargT</span><span class="p">(</span><span class="n">zdc</span><span class="o">.</span><span class="n">Component</span><span class="p">):</span>
  <span class="n">p</span> <span class="p">:</span> <span class="n">MyIF</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">__bind__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="p">{</span>
    <span class="n">p</span><span class="o">.</span><span class="n">api</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span> <span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;target: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">zdc</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">ns</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyInitC</span><span class="p">(</span><span class="n">zdc</span><span class="o">.</span><span class="n">Component</span><span class="p">):</span>
  <span class="n">p</span> <span class="p">:</span> <span class="n">MyIF</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">port</span><span class="p">()</span>

  <span class="nd">@zdc</span><span class="o">.</span><span class="n">process</span>
  <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span>
      <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TopC</span><span class="p">(</span><span class="n">zdc</span><span class="o">.</span><span class="n">Component</span><span class="p">):</span>
  <span class="n">i</span> <span class="p">:</span> <span class="n">MyInitC</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
  <span class="n">c</span> <span class="p">:</span> <span class="n">MyConsC</span> <span class="o">=</span> <span class="n">zdc</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">__bind__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="p">{</span>
    <span class="n">i</span><span class="o">.</span><span class="n">t</span> <span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">t</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>In the example above, the <em>modeling</em> aspect of Zuspec is shown in several
places:</p>
<ul class="simple">
<li><p>Ports and exports are marked as having a Python type of MyIF, but are not
explicitly initialized. A Python type checker can validate that method calls
are valid</p></li>
<li><p>The methods of an <em>export</em> are specified via the mapping returned from __bind__.
Here, again, the relationship is modeled and not the implementation</p></li>
<li><p>In the initiator, the <em>process</em> decoration marks the run method as one that is
automatically started when an instance of the class is created</p></li>
<li><p>In the top-level component, the __bind__ method specifies that the initiator and
consumer port/export is connected</p></li>
</ul>
<p>All the code is valid Python that supports static analysis tools such as type checkers.</p>
<section id="processing">
<h2>Processing<a class="headerlink" href="#processing" title="Link to this heading">¶</a></h2>
<p>Many Zuspec implementations provide something that appears to be a Python object.
In these cases, the Zuspec-defined class that is the base of the user-defined class
provides a __new__ implementation that constructs an appropriate implementation object.
These providers are known as Object Factories, and implement the ObjFactory protocol.
The base classes obtain the proper ObjFactory implementation via the Config class.</p>
<p>This scheme allows Zuspec classes to be created as any other Python class.</p>
</section>
<section id="runtime">
<h2>Runtime<a class="headerlink" href="#runtime" title="Link to this heading">¶</a></h2>
<p>An implementation of the ‘Timebase’ class allows methods to synchronize with respect
to a simulation time. The time used in ‘Timebase’ is not a wallclock time, so
asyncio.sleep() is never used in a Zuspec description</p>
</section>
<section id="datamodel">
<h2>Datamodel<a class="headerlink" href="#datamodel" title="Link to this heading">¶</a></h2>
<p>Zuspec uses a data model that is a superset, or specialization, of Python. In other
words, the Zuspec data model can represent the Python language, but also has special
types that are significant in Zuspec. For example, the data model has a <cite>Component</cite>
class that represents a class that inherits from the language-facade <cite>Component</cite> type.</p>
<p>The Zuspec dataclasses package provides a processor that accepts a set of types and
produces data models that correspond to them.</p>
<p>Fundamentally, the Zuspec datamodel is a type data model.</p>
<p>All type definitions in a datamodel Context have a name corresponding to the qualname
of the source type.</p>
<p>The datamodel bind map captures relationships between:</p>
<ul class="simple">
<li><p>port and export</p></li>
<li><p>input and output</p></li>
<li><p>input and input</p></li>
<li><p>export API type method and method</p></li>
</ul>
<p>port, export, input, and output references are captured as indexed expressions.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">__bind__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="p">{</span>
  <span class="n">i</span><span class="o">.</span><span class="n">t</span> <span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">t</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For example, the bind from the example above results in a bind map with a single
entry has the following type expressions:</p>
<ul class="simple">
<li><p>RefFieldIndex(RefFieldIndex(0, RefContext()), 0)</p></li>
<li><p>RefFieldIndex(RefFieldIndex(1, RefContext()), 0)</p></li>
</ul>
<p>The datamodel bind map is created by evaluating the __bind__ method and passing
an object for ‘self’ that converts references to fields to reference expression
data model elements.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Zuspec Language</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Zuspec Language Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#processing">Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#runtime">Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datamodel">Datamodel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="abstraction_levels.html">Abstraction Levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="fields.html">Class Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Core Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Runtime Implementation (Developer)</a></li>
<li class="toctree-l1"><a class="reference internal" href="checker.html">Zuspec IR Checker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="datamodel.html">Data Model (Developer)</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Zuspec Language</a></li>
      <li>Next: <a href="abstraction_levels.html" title="next chapter">Abstraction Levels</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Matthew Ballance.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.1.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/intro.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>